# 主题系统重构计划

## 背景

当前项目中的主题系统存在以下问题：

1. 大量组件使用基于主题名称（light/dark/cyberpunk/green）的条件判断来应用样式
2. 样式逻辑分散在各个组件中，导致维护困难
3. 每次添加新主题需要修改多处代码

## 重构目标

1. 移除基于主题名称的条件判断
2. 利用CSS变量和Tailwind CSS实现主题无关的样式系统
3. 通过HTML的`data-theme`属性和CSS变量来控制主题
4. 简化主题切换逻辑
5. 提高性能，减少运行时计算

## 重构方案

我们采用了基于CSS变量和主题无关的通用CSS类的方案：

1. 在`src/styles/themes/base.css`中定义主题无关的通用CSS类
2. 通过CSS变量在不同主题下设置不同的样式
3. 在组件中使用通用CSS类，而不是基于主题名称的条件判断

## 重构进度

### 已完成

- [x] 创建主题无关的通用CSS类
- [x] 重构Dashboard.vue组件
- [x] 重构TabsNav.vue组件

### 待完成

- [ ] 重构ThemeSwitcher.vue组件
- [ ] 重构其他使用了类似模式的组件
- [ ] 优化主题切换逻辑
- [ ] 更新主题相关的文档
- [ ] 测试在所有主题下的样式正确性

## 重构实施细节

### 1. 主题无关的通用CSS类

我们在`src/styles/themes/base.css`中添加了以下通用CSS类：

```css
/* 文本颜色相关 */
.text-heading    /* 主要标题文本 */
.text-subheading /* 次要标题文本 */
.text-body       /* 正文文本 */
.text-muted      /* 次要文本 */
.text-placeholder /* 占位符文本 */

/* 背景色相关 */
.bg-surface      /* 主要表面背景 */
.bg-elevated     /* 提升表面背景 */
.bg-card-alt     /* 备选卡片背景 */

/* 边框相关 */
.border-subtle   /* 微妙边框 */
.border-input    /* 输入框边框 */
.border-accent   /* 强调边框 */

/* 其他样式 */
.glass-morphism  /* 玻璃态效果 */
.shadow-theme    /* 主题阴影 */
.shadow-theme-lg /* 大型主题阴影 */
```

### 2. Dashboard.vue组件的重构

- 移除了基于主题名称的条件判断
- 移除了动态计算的样式类
- 使用主题无关的通用CSS类
- 简化了组件代码

### 3. TabsNav.vue组件的重构

- 移除了大量基于主题名称的条件判断
- 使用CSS变量和主题无关的样式
- 简化了组件代码，提高了可维护性

## 后续计划

1. 继续重构其他组件
2. 创建更完善的主题切换动画
3. 优化主题初始化过程，减少闪烁
4. 添加更多主题，验证系统的可扩展性 